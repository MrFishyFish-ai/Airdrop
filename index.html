<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Transfer Tool</title>
</head>
<body>
    <h1>Auto Transfer Tool</h1>
    <button id="connectWallet">Connect Wallet</button>
    <form id="transferForm" style="display:none;">
        <label for="recipientAddress">Recipient Address:</label>
        <input type="text" id="recipientAddress" required>
        <br>
        <label for="amount">Amount (SOL):</label>
        <input type="number" id="amount" step="0.01" required>
        <br>
        <button type="submit">Transfer</button>
    </form>
    <p id="result"></p>

    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script>
        let wallet;

        document.getElementById('connectWallet').addEventListener('click', async () => {
            if (window.solana && window.solana.isPhantom) {
                wallet = window.solana;
                await wallet.connect();
                document.getElementById('transferForm').style.display = 'block';
                document.getElementById('connectWallet').style.display = 'none';
            } else {
                alert("Phantom Wallet not detected!");
            }
        });

        document.getElementById('transferForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const recipientAddress = document.getElementById('recipientAddress').value;
            const amount = parseFloat(document.getElementById('amount').value);

            const connection = new solanaWeb3.Connection("https://api.mainnet-beta.solana.com", "confirmed");
            const transaction = new solanaWeb3.Transaction().add(
                solanaWeb3.SystemProgram.transfer({
                    fromPubkey: wallet.publicKey,
                    toPubkey: new solanaWeb3.PublicKey(recipientAddress),
                    lamports: amount * solanaWeb3.LAMPORTS_PER_SOL,
                })
            );

            try {
                const signature = await wallet.signAndSendTransaction(transaction);
                document.getElementById('result').textContent = `Transfer successful! Signature: ${signature}`;
            } catch (error) {
                document.getElementById('result').textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>